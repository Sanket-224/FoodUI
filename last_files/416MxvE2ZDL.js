(function(o,k){o.execute(function(){o.when("A","load").register("smShareCommonAUI",function(f){var d=f.$,b={facebook:{shortName:"fb",actionName:"multiItemAction",window:{width:600,height:370},userImageElement:{elementId:"fbImage",imageClass:"smFBUserImage",style:""}},twitter:{shortName:"tw",actionName:"multiItemAction",window:{width:550,height:420},userImageElement:{elementId:"twImage",imageClass:"smTWUserImage",style:"display:none"}},sina:{shortName:"si",connectObject:k.amznsi,actionName:"multiItemAction",
window:{width:550,height:420},userImageElement:{elementId:"sinaImage",imageClass:"smSinaUserImage",style:"display:none"}},renren:{shortName:"re",actionName:"multiItemAction",window:{width:600,height:370},userImageElement:{elementId:"reImage",imageClass:"smRenrenUserImage",style:"display:none"}},qzone:{shortName:"qz",actionName:"multiItemAction",window:{width:600,height:370},userImageElement:{elementId:"qzImage",imageClass:"smQzoneUserImage",style:"display:none"}},tencent:{shortName:"tc",actionName:"multiItemAction",
window:{width:550,height:420},userImageElement:{elementId:"tcImage",imageClass:"smTencentUserImage",style:"display:none"}},douban:{shortName:"db",actionName:"multiItemAction",window:{width:550,height:420},userImageElement:{elementId:"dbImage",imageClass:"smDoubanUserImage",style:"display:none"}},weChat:{shortName:"we",hideASINSelector:1},email:{shortName:"em",actionName:"multiItemAction"},promotion:{shortName:"pr",hideASINSelector:1},socialcoupons:{shortName:"sc",hideASINSelector:1}},j=d("#swftyp"),
q=function(){if(j&&j.height())try{k.parent&&k.parent.P&&k.parent.P.when("A").execute(function(a){a.trigger("social-widget:social-page:change",{name:"social-page",height:17+j.height(),width:5+j.width()})})}catch(b){}};q();var i={collectMetrics:function(e,a,l,r){r||(r=g.options.refPrefix+"_"+b[a].shortName+"_"+e+"_Share");d.ajax({type:"POST",url:"/gp/socialmedia/connect/backend/metrics.html/ref="+r+"?token="+g.params.token,cache:!1,data:{desc:a+"-Share-"+e,id:typeof l!="undefined"?l:e}})},logShareMetrics:function(b,
a){d.ajax("/gp/aw/social/swf/metrics.html/ref="+a,{method:"post",params:{id:b,result:"success"}})}},u=function(d,a,l,r){var c,a=b[a].window,h=k.open("","","width="+a.width+",height="+a.height+",left="+Math.floor((screen.width-a.width)/2)+",top="+Math.floor((screen.height-a.height)/2)+",location=yes,resizable=yes,scrollbars=yes,status=yes");h.opener=null;h.location=d;i.logShareMetrics(g.params.asin,r);var f=function(){!h||h.closed?l(null,{status:!1,reason:"closed"}):c=k.setTimeout(f,300)};this.clearTimer=
function(){try{k.clearTimeout(c)}catch(a){}};k.setTimeout(function(){!h||h.closed?l(null,{status:!1,reason:"na"}):c=k.setTimeout(f,300)},1500);return this},m=function(b,a){this.shared=!1;this.contentDiv=b;this.headDiv=a;if(b.hasClass("smShared"))this.shared=!0;this.afterConnectFlow=this.sharing=!1};m.prototype.canShare=function(){return!this.shared&&!this.sharing};m.prototype.canConnectOnError=function(){return!this.afterConnectFlow};m.prototype.canChangeTabStyle=function(){return!this.shared};m.prototype.setSharing=
function(){this.contentDiv.find(".smShareSubmit").removeClass("a-button-disabled");this.contentDiv.find(".smShareSubmit").addClass("a-button-disabled");this.sharing=!0};m.prototype.setShared=function(b){this.contentDiv.addClass("smShared");g.elementHide(this.contentDiv.find(".smTabFormContent"));b&&(this.headDiv.addClass("smShared"),this.headDiv.find(".smSharedTxt").length==0&&b&&this.headDiv.find(".smTabHdTxt").append('<span class="smSharedTxt a-color-success">'+b.reason+"</span>"));this.contentDiv.find(".smShareSubmit").attr("disabled");
this.shared=!0};m.prototype.resetShared=function(){this.contentDiv.removeClass("smShared");this.headDiv.removeClass("smShared");g.elementShow(this.contentDiv.find(".smTabFormContent"));this.contentDiv.find(".a-alert").remove();this.headDiv.find(".smSharedTxt").remove();this.shared=!1};m.prototype.resetSharing=function(){this.contentDiv.find(".smShareSubmit").removeClass("a-button-disabled");this.contentDiv.find(".smShareSubmit").removeClass("a-button-error");this.sharing=!1};var n=function(e,a,l,
f){var c=this,h=null;c.contentDivId=e;c.headDivId=a;c.isConnected=f;f=new m(d(e),d(a));c.state=f;var i=d(a).attr("href");c.getAfterSignInPage=function(){return i!=null?i.replace(/\/ref=[^?]*/,""):null};var j=!1;c.loadConnectButton=function(a){if(!j&&(smConnectObject=b[l].connectObject)&&smConnectObject.getActionButtonHtml){var d=c.getAfterSignInPage(),h=null,e=null;d!=null&&(h=d+"&action=connect",e=d+"&action=connectError");j=!0;smConnectObject.getActionButtonHtml(function(c){a.append(c);j=!1},c.onConnect,
h,e)}};c.onConnect=function(a){smConnectObject=b[l].connectObject;if(a.connected){c.clearError(d(c.contentDivId));c.state.setShared(null);c.isConnected=!0;var h=b[l].userImageElement;if(h){var g=h.elementId,f=h.imageClass,h='<td class="'+f+'"><div style="'+h.style+'"><iframe name="'+g+'" height="24" width="24" frameborder="0" scrolling="no"></iframe></div></td>';if(d(e).find("."+f).length==0&&(f=d(e).find("table>tr"),f.length>0&&(f=f[0],d(f).find("td").length==1))){var i=d(f).find("td"),r=i.html();
i.remove();d(f).prepend(d(h));d(f).append(d('<td style="width:100%">'+r+"</td>"));c.loadUserImage(e,g,l)}}c.showConnectSuccess(a)}else c.state.resetSharing(),c.state.resetShared(),c.state.setShared(null),c.showError(c.contentDivId,{})};c.doShareWithoutConnect=function(a){var e=d("#smShareForm").serializeArray(),f={},i="def",r="";if(c.state.shared)return!1;d.each(e,function(a,b){if(c.shareDialogParams[b.name]!=null)f[c.shareDialogParams[b.name]]=b.value;else if(b.name=="refTag")i=b.value;else if(b.name!=
"asin"&&b.name=="eventType")r=b.value});l=="sina"&&d("#weChatWeblab").length!=0&&(i="s"+d("#weChatWeblab").attr("value")+"_"+i);i=g.options.refPrefix+"_"+b[l].shortName+"_share-wc_"+i;if(l=="facebook"){var e=k.location,t=g.params.actionLinks.text,j=g.params.actionLinks.link;j&&t&&t.length>0&&j.length>0&&(f.actions='[{link:"'+j+'", name: "'+t+'" }]');f.redirect_uri=e.protocol+"//"+e.host+(e.port==""?"":":"+e.port)+"/gp/socialmedia/share/ui/post-redirect.html/ref="+g.options.refPrefix+"_fb_share-red_"+
i+"?socialNetwork=facebook&eventType="+r}e=d.param(f);t=function(b,d){h!=null&&(h.clearTimer(),h=null);d.reason!="na"&&p(d);a&&c.showConnectMessage(d)};h=u(c.dialogUrl+e,l,t,i);g.registerPopupHandler(l,t);c.clearError(d(c.contentDivId));a&&(d(c.contentDivId).find(".smConnectMessage").remove(),e=d('<div class="smConnectTxtHeader">'+g.params.strings.connectMsgHeader[l]+"</div>"),t=d('<div class="smConnectTxt">'+g.params.strings.connectMsgDetails[l]+"</div>"),j=d('<div class="smConnectMessage" style="display:none;visibility:hidden;"></div>'),
j.append(e),d(c.contentDivId).append(j),e.after(t),t.after('<div class="'+c.connectButtonClass+'"></div>'),c.loadConnectButton(j.find("."+c.connectButtonClass)))};c.makeCall=function(c,a,h){var e=d("#smShareForm").serializeArray();e.standalone=0;var f={};d.each(e,function(c,a){f[a.name]=a.value});(e=f.refTag)||(e="def");f.socialNetwork=c;var l="";f.allAsins&&f.asin!=f.allAsins&&(l="_"+Math.round(f.allAsins.indexOf(f.asin)/11));c=g.options.refPrefix+"_"+b[c].shortName+"_sh_";c+=(h?"1":"0")+l+"_";d.ajax({type:"POST",
url:"/gp/socialmedia/share/backend/share.html/ref="+(c+e),data:f,dataType:"json",cache:!1,timeout:1E4,success:a,error:function(){a({status:0,reason:"time_out"})}})};c.doShare=function(){c.clearError(d(c.contentDivId));if(!c.state.canShare())return!1;c.makeCall(l,p,c.isConnected);c.state.setSharing();return!1};c.showConnectMessage=function(a){if(a.status||!(a.reason=="closed"&&l=="facebook")){var b=d(c.contentDivId).find(".smConnectMessage");a.status&&b.prepend('<div class="smHRLine"></div>');b.css({display:"",
visibility:""});d(c.contentDivId).find("#smTabContent").addClass("smTabContentHidden")}};var p=function(a){a&&a.status?(c.shareSuccessHandler(a),c.state.setShared(a)):a&&(a.reason=="not_connected"||a.reason=="permission_error"||a.reason=="not_recognized")?(c.isConnected=!1,c.showError(c.contentDivId,a)):a.reason=="closed"?c.state.resetSharing():c.showError(c.contentDivId,a);c.state.resetSharing()};c.showError=function(a,c){var b=d(a),h,e;h=d(a).find(".smErrorMsg");h.length==0?(h="<div class='a-box a-alert a-alert-error smErrorMsg a-spacing-small a-spacing-top-small a-hidden'>",
h+="<div class='a-box-inner a-alert-container'><i class='a-icon a-icon-alert'></i><p><span class='a-color-error smErrorText'> </span></p></div></div>",d(a).prepend(h),h=d(a).find(".smErrorMsg"),e=h.find(".a-box-inner")):(e=h.find(".a-box-inner"),e.find("h4").remove());c||(c={});if(!c.sev)c.sev="error";if(!c.message)c.message=g.params.strings.defaultError;if(!c.alert)c.alert=g.params.strings.defaultAlert;if(!c.errorIcons)c.errorIcons="https://images-na.ssl-images-amazon.com/images/G/01/traffic/s9m/images/share/errors-icons.png";
e.prepend("<h4>"+c.alert+"</h4>");e.find(".smErrorText").html(c.message);h.addClass("smErrorSev-"+c.sev);g.elementShow(h);b.find(".smShareSubmit").removeClass("a-button-disabled");b.find(".smShareSubmit").addClass("a-button-error");q()};c.clearError=function(a){g.elementHide(a.find(".smErrorMsg"));a.find(".smShareSubmit").removeClass("a-button-error");q()}},s=function(b,a,f){var i=this;asins=b.allAsins;i.asinData={};var c=!1;i.initialize=function(){d("#smCarouselTab li.a-carousel-card div").live("click",
function(){var a=d(this).find("input[name='cardAsin']").val();g.carousel.hide();g.repaint(i.asinData[a]);return!1});o.when("a-carousel-framework").execute(function(a){a.initializeAll()})};var h=!1;i.show=function(){c||(i.initialize(),c=!0);g.elementShow(d("#smCarouselTab"));h=!0;a&&a()};i.hide=function(){h&&(g.elementHide(d("#smCarouselTab")),h=!1,f&&f())};i.populate=function(a){i.asinData[a.asin]=a;return!0}},p=function(){function e(a,h){f.on("a:tabs:smTabSet:smSocialTab_"+a+":select",function(){if(a!=
g.currentTab){b[h].hideASINSelector?g.elementHide(d("#smMultiItemSelector")):g.elementShow(d("#smMultiItemSelector"));g.currentTab=a;d("#smShareForm input[name='socialNetwork']").val(h);for(var e=0;e<g.registeredTabClickHandlers.length;e++)g.registeredTabClickHandlers[e]();try{i.collectMetrics("tab-click",h,g.params.asin,g.options.refPrefix+"_tab_"+g.currentTab+"_click")}catch(f){}}q()})}var a=this,l=[],j=[];a.currentTab=0;a.socialNetworks=[];a.socialNetworkAliasNames={};a.options={selectedHeadClass:"smTabHdSelect",
unselectedHeadClass:"smTabHdUnselect",numberOfTabs:0,refPrefix:"swf_as_"};a.handlerMap={};a.eventHandler={};a.shareHandler=n;a.stateController=m;a.registeredRepaintHandlers=[];a.registeredRepaintHandlers.push(function(c){if(c)d("#smItemTitle").html(c.title),d("#smShareForm input[name='asin']").attr("value",c.asin),g.params.asin=c.asin;a.trimMultiItemTitle()});a.registeredTabClickHandlers=[];a.isStandalone=function(){return a.params.standalone};a.initialize=function(c,h,f,g){a.params=g;a.options.refPrefix=
g.refPrefix;o.when("smFacebookConnectInitialized").execute(function(){k.amznfb.refPrefix=g.refPrefix;b.facebook.connectObject=k.amznfb});o.when("smTwitterConnectInitialized").execute(function(){k.amzntw.refPrefix=g.refPrefix;b.twitter.connectObject=k.amzntw});o.when("smSinaConnectInitialized").execute(function(){k.amznsi.refPrefix=g.refPrefix;b.sina.connectObject=k.amznsi});a.currentTab=h;for(h=0;h<c;h++)l[h]=new e(h,f[h].id);for(h=0;h<f.length;h++){a.socialNetworks.push(f[h].id);if(f[h].aliasName)a.socialNetworkAliasNames[f[h].id]=
f[h].aliasName;a.handlerMap[f[h].id]&&(c=a.handlerMap[f[h].id],j[h]=new c(f[h].appName,g.refPrefix),c.prototype.onTabClickHandler&&a.registeredTabClickHandlers.push(c.prototype.onTabClickHandler),c.prototype.repaintHandler&&a.registeredRepaintHandlers.push(c.prototype.repaintHandler))}c=function(){a.elementShow(d("#smSocialTabContent_"+a.currentTab));a.elementShow(d("#smMultiItemSelector"));for(var c=0;c<j.length;c++)j[c]&&(j[c].state.resetSharing(),j[c].state.resetShared())};h=function(){j[a.currentTab]&&
(j[a.currentTab].state.resetShared(),a.repaintCarouselHeader(a.socialNetworks[a.currentTab]));a.elementHide(d("#smSocialTabContent_"+a.currentTab));a.elementHide(d("#smMultiItemSelector"))};if(d(".smMultiItemHeader").length>0)a.carousel=new s(g,h,c,j,f),a.elementHide(d(".smMultiItemHeader.nonJS")),a.elementShow(d(".smMultiItemHeader.JS")),a.trimMultiItemTitle(),d("#smMultiItemChange").click(function(){a.carousel.show();i.collectMetrics("mi-change",null,"mi-change",a.options.refPrefix+"_mi_chg");q();
return!1}),i.collectMetrics("multi-item",null,"multi-item",a.options.refPrefix+"_mi_im")};a.tabs=function(a){return l[a]};a.repaintCarouselHeader=function(c){var h=b[c].actionName;h!=""&&(h=a.params.strings[h]);a.socialNetworkAliasNames[c]&&(c=a.socialNetworkAliasNames[c]);c=g.params.strings.multiItemSelect+" "+h+" "+c+":";d("#smCarouselTab").find(".a-carousel-heading").html(c)};a.trimDivContent=function(a,b,e,f,g){if(a){a=d(a);hdiv=g?d(g):a;g=hdiv.outerHeight();e+=5;if(g>e){var l=Math.ceil(e/f),
l=Math.floor(a.outerHeight()/l),l=b.length/l;l*f<b.length&&(b=b.substring(0,l*f),a.html(b+"..."),g=hdiv.outerHeight());for(f=0;g>e&&f++<1E3;)b=b.substring(0,b.length-1),a.html(b+"..."),g=hdiv.outerHeight()}q()}};a.trimMultiItemTitle=function(){var c=d(".smMultiItemHeader.JS").find("#smItemTitle"),b=c.html();if(c||c.length>0)c=c[0],a.trimDivContent(c,b,18,1,".smMultiItemHeader.JS")};a.elementHide=function(a){a.addClass("a-hidden")};a.elementShow=function(a){a.removeClass("a-hidden")}};p.prototype.registerPopupHandler=
function(b,a){d(g.eventHandler).unbind("post_redirect-"+b);d(g.eventHandler).bind("post_redirect-"+b,a)};p.prototype.popupHandler=function(b,a){d(g.eventHandler).trigger("post_redirect-"+a,[b])};p.prototype.repaint=function(b){for(var a=0;a<g.registeredRepaintHandlers.length;a++)g.registeredRepaintHandlers[a](b)};p.prototype.hideCarousel=function(){this.carousel&&this.carousel.hide()};var g=new p;return{smShareTabs:g}});o.when("smShareCommonAUI").execute(function(f){k.smShareTabs={};k.smShareTabs.popupHandler=
function(d,b){f.smShareTabs.popupHandler(d,b)};k.smShareTabs.populateCard=function(d){f.smShareTabs.carousel.populate(d)}});o.when("smShareCommonAUI","A").register("smShareEmailAUI",function(f,d){var b=d.$,j=function(){var k=this;k.isConnected=!1;f.smShareTabs.shareHandler.call(this,"#smEmailTab","#smTabHdem","email",this.isConnected);var i=b("#smEmailTab").find(".smShareNote textarea");j.prototype.repaintHandler=function(){};k.doShare=function(){k.clearError(b("#smEmailTab"));if(!k.state.canShare())return!1;
i.val()==f.smShareTabs.params.strings.optionalNote&&i.val("");var a=b("#smEmailTab").find(".smShareTo textarea");a.html(a.html().replace(/,/g,", "));k.makeCall("email",u,!0);k.state.setSharing();return!1};var u=function(a){b("#smEmailTab").find(".tafCaptchaBox").remove();b("#smEmailTab").find(".smCaptchaError").remove();if(a&&a.status)if(b("#smEmailTab").find(".tafCaptchaBox").remove(),k.state.setShared(a),b("#smEmailTab").find(".smSuccessMsg").length==0){var e="<div class='a-box a-alert a-alert-success smSuccessMsg a-spacing-small a-spacing-top-small'>";
e+="<div class='a-box-inner a-alert-container'><i class='a-icon a-icon-alert'></i><p><span class='a-color-success'>"+a.message+"</span></p></div></div>";b("#smEmailTab").prepend(e)}else b("#smEmailTab").find(".smSuccessMsg span").html(a.message),f.smShareTabs.elementShow(b("#smEmailTab").find(".smSuccessMsg"));else a&&(a.reason=="captcha_error"||a.reason=="force_captcha")?a.params&&a.params.ces&&m(a):k.showError("#smEmailTab",a);k.state.resetSharing()},m=function(a){function f(){d=b('<img src="'+
a.params.loadingImage+'" border="0"></img>');b("#smCaptchaLoading").html(d);b.ajax({type:"GET",url:"/gp/pdp/taf/du/captcha.html",cache:!1,dataType:"json",data:{},success:function(a){b("#smCaptchaLoading").html("");a.error==1?c():(b("#smCaptchaImage").attr("src",a.image),b("#smCaptchaCes").val(a.ces))},error:function(){c()}})}function c(){b("#smCaptchaLoading").html("")}var e='<div class="tafCaptchaBox a-box a-color-alternate-background"><div><div class="tafCaptchaAlert" style="background-image:url('+
a.params.alertImg+')"></div><p>';a.reason=="captcha_error"&&(e+='<strong class="a-color-state">'+a.params.alertText+"</strong><br/>");e+=a.params.alertInfo+"</p></div>";e+='<table style="margin-bottom: 5px;"><tr><td><img id="smCaptchaImage" src="'+a.params.image+'" border="1" height="70" /></td>';e+='<td><a id="smRefreshCaptcha" href="'+a.params.reloadURL+'">'+a.params.captchaRefresh+"</a>";e+='<div id="smCaptchaLoading" style="height: 14px; margin-right: 6px; margin-top: 6px;"></div></td></tr>';
e+='<tr><td><input class="a-input-text a-form-normal a-width-base" type="text" name="guess" size="20" style="font-family: Arial; margin: 0; width: 202px; height: 24px;" value=""/>';e+='<input id="smCaptchaCes" type="hidden" name="ces" value="'+a.params.ces+'" /></td><td>';e+=a.params.helpPage;e+="</td></tr></table>";a.message&&(e+='<div class="smCaptchaError"><span class="a-color-error">'+a.message+"</span></div>");e+="</div>";b(e).insertAfter(b("#smEmailTab").find(".smShareNoteArea"));var d="";b("#smRefreshCaptcha").click(function(){f();
return!1})},n=b("#smEmailTab textarea[name='recipients']"),s=f.smShareTabs.params.strings.defaultTo,p=function(){if(s==n.val()||""==n.val())n.val(""),n.css({color:"#000000"})},g=function(){if(!n.val()||n.val().replace(/[\n\s]*$/,"").length==0)n.val(s),n.css({color:"#666666"})},e=function(){i.val()==f.smShareTabs.params.strings.optionalNote?(i.val(""),i.css({color:"#000000"})):i.val()==f.smShareTabs.params.strings.defaultMsg&&i.select()},a=function(){i.val()==""&&(i.val(f.smShareTabs.params.strings.optionalNote),
i.css({color:"#666666"}))};!d.capabilities.textareaPlaceholder&&!f.smShareTabs.isStandalone()&&(n.bind("focus",p),n.bind("blur",g),i.bind("focus",e),i.bind("blur",a),g(),a());f.smShareTabs.isStandalone()||b("#smEmailTab").find(".formLabel").hide();b("#smEmailTab").find(".smShareSubmit").click(k.doShare);o.when("a-button").execute(function(a){a(".smShareSubmit").enable()})};f.smShareTabs.handlerMap.email=j;j.prototype=new f.smShareTabs.shareHandler;j.prototype.constructor=j});o.when("smShareCommonAUI",
"A").register("smShareFacebookAUI",function(f,d){var b=d.$,j=function(q){var i=this;i.connectButtonClass="smConnectFBButton";this.isConnected=!1;if(b("#smFacebookTab").find("textarea[name='fbMessage']").size())this.isConnected=!0;f.smShareTabs.shareHandler.call(this,"#smFacebookTab","#smTabHdfb","facebook",this.isConnected,q);var u=!1,m=function(){if(!u){var e=b("#smFacebookTab").find(".smFBDescription>span"),a=e.html();if(e||e.length>0)e=e[0],f.smShareTabs.trimDivContent(e,a,28,2);e=b("#smFacebookTab").find(".smProductTitle>span");
a=e.html();if(e||e.length>0)e=e[0],f.smShareTabs.trimDivContent(e,a,13,1);u=!0}},n=function(){if(b.browser.msie){var e=b("#smFacebookTab").find(".smFBDescription>span"),a=e.html(),f=b("#smFacebookTab").find(".smProductTitle>span"),d=f.html();encodeURI(encodeURI(encodeURI(a))).length+encodeURI(encodeURI(encodeURI(d))).length>1500&&(a=a.substring(0,40)+"...",e.html(a),d=d.substring(0,30)+"...",f.html(d),b("#smShareForm input[name='fbTitle']").attr("value",d),b("#smShareForm input[name='fbDescription']").attr("value",
a))}};n();f.smShareTabs.isStandalone()&&f.smShareTabs.currentTab==0?k.setTimeout(m,300):m();var s=function(){var e=b("#smFacebookTab").find(".smFBCommentsDefault");e.length>0&&(e.find("textarea").val()==f.smShareTabs.params.strings.defaultFBMsg&&e.find("textarea").html(""),e.addClass("smFBComments"),e.removeClass("smFBCommentsDefault"));f.smShareTabs.currentTab==0&&m()};j.prototype.onTabClickHandler=s;j.prototype.repaintHandler=function(e){e&&(b("div.smFBProductImage img").attr("src",e.fbImageURL),
b("div.smProductTitle span").html(e.fbTitle),b("div.smFBDescription span").html(e.fbDescription),b("#smShareForm input[name='fbTitle']").attr("value",e.fbTitle),b("#smShareForm input[name='fbDescription']").attr("value",e.fbDescription),b("#smShareForm input[name='fbImageURL']").attr("value",e.fbImageURL),b("#smShareForm input[name='fbHref']").attr("value",e.fbHref),n());u=!1;s()};i.shareDialogParams={fbTitle:"name",fbDescription:"description",fbImageURL:"picture",appId:"app_id",fbMessage:"message",
fbHref:"link",caption:"caption"};i.dialogUrl="http://www.facebook.com/dialog/feed?display=popup&";i.shareSuccessHandler=function(e){b("#smFacebookTab").find(".smFBComments").addClass("smFBCommentsDefault");if(b("#smFacebookTab").find(".smSuccessMsg").length==0){var a="<div class='a-box a-alert a-alert-success smSuccessMsg a-spacing-small a-spacing-top-small'>";a+="<div class='a-box-inner a-alert-container'><i class='a-icon a-icon-alert'></i><p><span class='a-color-success'>"+e.message+"</span></p></div></div>";
b("#smFacebookTab").find(".smFBUserImage>div").length>0?b("#smFacebookTab").find(".smFBCommentsDefault").find("textarea").before(a):b("#smFacebookTab").prepend(a)}else b("#smFacebookTab").find(".smSuccessMsg span").html(e.message),f.smShareTabs.elementShow(b("#smFacebookTab").find(".smSuccessMsg"));b("#smFacebookTab").find(".smFBComments").removeClass("smFBComments")};b("#smFacebookTab").find(".smShareSubmit");b("#smFacebookTab").find(".smShareSubmit").click(function(){i.isConnected?i.doShare():i.doShareWithoutConnect(!1);
return!1});b("#smShareWCFB>a").click(function(){i.doShareWithoutConnect(!1);return!1});var q=function(){g.val()==f.smShareTabs.params.strings.defaultFBMsg&&(g.val(""),g.css({color:"#000000"}))},p=function(){g.val()==""&&(g.val(f.smShareTabs.params.strings.defaultFBMsg),g.css({color:"#666666"}))},g=b("#smFacebookTab").find(".smTabFormContent textarea");g.length&&!d.capabilities.textareaPlaceholder&&!f.smShareTabs.isStandalone()&&(g.bind("focus",q),g.bind("blur",p),p());o.when("a-button").execute(function(b){b(".smShareSubmit").enable()})};
j.prototype=new f.smShareTabs.shareHandler;j.prototype.constructor=j;f.smShareTabs.handlerMap.facebook=j});o.when("smShareCommonAUI","A").register("smShareTwitterAUI",function(f,d){var b=d.$,j=function(d){this.isConnected=!1;if(b("#smTwitterTab").find(".smTWUserImage").length>0)this.isConnected=!0;f.smShareTabs.shareHandler.call(this,"#smTwitterTab","#smTabHdtw","twitter",this.isConnected,d);var i=this,k,m=b("#smTwitterTab").find(".smTweetText > textarea"),n=b("#smTwitterTab").find(".smTwitterCount > span");
i.shareDialogParams={related:"related",twMessage:"text",twHref:"url"};i.dialogUrl="http://twitter.com/intent/tweet?";i.shareSuccessHandler=function(d){if(b("#smTwitterTab").find(".smSuccessMsg").length==0){var g="<div class='a-box a-alert a-alert-success smSuccessMsg a-spacing-small a-spacing-top-small'>";g+="<div class='a-box-inner a-alert-container'><i class='a-icon a-icon-alert'></i><p><span class='a-color-success'>"+d.message+"</span></p></div></div>";b("#smTwitterTab").prepend(g)}else b("#smTwitterTab").find(".smSuccessMsg span").html(d.message),
f.smShareTabs.elementShow(b("#smTwitterTab").find(".smSuccessMsg"))};j.prototype.repaintHandler=function(d){d&&(b("#smShareForm input[name='twHref']").attr("value",d.twHref),b("#twMessage").val(d.twMessage),b("#smTweetFooterMessage").text(d.twFooter),s())};b("#smShareWCTW>a").click(function(){i.doShareWithoutConnect(!1);return!1});b("#smTwitterTab").find(".smShareSubmit").click(function(){i.isConnected?i.doShare():i.doShareWithoutConnect(!1);return!1});var s=function(){var b=k-m.val().length;n.html(b+
"")};k=n.html();n.html(""+(k-m.val().length));m.bind("keyup",s);o.when("a-button").execute(function(b){b(".smShareSubmit").enable()})};j.prototype=new f.smShareTabs.shareHandler;j.prototype.constructor=j;f.smShareTabs.handlerMap.twitter=j});o.when("smShareCommonAUI","smShareEmailAUI","smShareFacebookAUI","smShareTwitterAUI").register("smShareJavaScript_AUI",function(){})})})(function(){var o=window.AmazonUIPageJS||window.P,k=o._namespace||o.attributeErrors;return k?k("RetailSocialShareTYPAUIAssets"):
o}(),window);